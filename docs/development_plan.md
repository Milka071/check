# План разработки "Библиотека Личных Процедур"

## Обзор проекта
Веб-платформа для создания, хранения и выполнения персональных чек-листов и многошаговых процедур с календарной функциональностью, системой напоминаний и медиа-контентом.

## Технологический стек
- **Frontend**: Next.js 15 с TypeScript (TSX)
- **Стили**: Tailwind CSS
- **UI-компоненты**: shadcn/ui
- **Пакетный менеджер**: pnpm
- **Backend**: Supabase (база данных, аутентификация, API)
- **Хостинг**: Vercel
- **Файловое хранилище**: Supabase Storage

## Архитектура приложения

### Структура проекта
```
src/
├── app/                 # Next.js App Router pages
│   ├── calendar/        # Календарь процедур
│   ├── library/         # Библиотека всех процедур
│   ├── procedure/[id]/  # Страница выполнения процедуры
│   ├── settings/        # Настройки пользователя
│   ├── layout.tsx       # Основной layout приложения
│   └── page.tsx         # Главная страница (ежедневные процедуры)
├── components/          # Переиспользуемые компоненты
│   ├── ui/              # Компоненты shadcn/ui
│   ├── daily-procedures.tsx
│   ├── procedure-card.tsx
│   ├── create-procedure-form.tsx
│   └── ...
├── lib/                 # Вспомогательные функции и типы
│   ├── types.ts         # Типы данных TypeScript
│   └── utils.ts         # Утилиты
```

### База данных (Supabase)
```sql
-- Основные таблицы:
- users (пользователи)
- procedures (процедуры/чек-листы)
- procedure_steps (шаги процедур)
- user_schedules (расписание пользователей)
- media_attachments (медиа-файлы)
- reminders (напоминания)
```

## Этапы разработки

### Этап 1: Базовая функциональность (2-3 недели)
**Цель**: Настроить проект и реализовать базовую архитектуру с CRUD операциями для процедур

#### Неделя 1: Настройка проекта и архитектура
- [ ] Настройка проекта Next.js с TypeScript и Tailwind CSS
- [ ] Интеграция shadcn/ui компонентов
- [ ] Настройка структуры директорий
- [ ] Создание базовых UI компонентов
- [ ] Настройка маршрутизации (App Router)

#### Неделя 2: Система аутентификации
- [ ] Интеграция Supabase Auth
- [ ] Создание страницы входа/регистрации
- [ ] Защита маршрутов
- [ ] Управление сессиями пользователей

#### Неделя 3: CRUD для процедур
- [ ] Создание типов данных TypeScript
- [ ] Реализация создания процедур с шагами
- [ ] Реализация редактирования процедур
- [ ] Реализация удаления процедур
- [ ] Реализация просмотра списка процедур

### Этап 2: Календарь и планирование (1-2 недели)
**Цель**: Реализовать календарную функциональность и планирование процедур

#### Неделя 1: Календарная функциональность
- [ ] Создание страницы календаря
- [ ] Интеграция компонента календаря
- [ ] Отображение процедур по дням
- [ ] Навигация по календарю

#### Неделя 2: Планирование процедур
- [ ] Реализация планирования процедур на определенные дни
- [ ] Создание расписания пользователей
- [ ] Интеграция с базой данных Supabase
- [ ] Автоматическое добавление праздничных дней

### Этап 3: Медиа и напоминания (1-2 недели)
**Цель**: Добавить поддержку медиа-контента и систему напоминаний

#### Неделя 1: Медиа-контент
- [ ] Интеграция Supabase Storage
- [ ] Реализация загрузки медиа-файлов
- [ ] Отображение медиа в шагах процедур
- [ ] Поддержка фото, видео, аудио

#### Неделя 2: Система напоминаний
- [ ] Создание системы вечерних напоминаний
- [ ] Реализация уведомлений о начале процедур
- [ ] Настройка пользовательских напоминаний
- [ ] Интеграция с браузерными уведомлениями

### Этап 4: Интеграции (1 неделя)
**Цель**: Интеграция с Яндекс.Станцией и финальная настройка

#### Неделя 1: Интеграции умного дома
- [ ] Интеграция с API Яндекс.Станции
- [ ] Реализация управления умными устройствами
- [ ] Тестирование интеграции
- [ ] Деплой на Vercel

## API Endpoints
- `/api/procedures` - CRUD операции с процедурами
- `/api/schedules` - управление расписанием
- `/api/reminders` - система напоминаний
- `/api/smart-home` - интеграция с Яндекс.Станцией
- `/api/media` - загрузка медиа-файлов

## Компоненты пользовательского интерфейса

### Основные экраны
1. **Главная страница** - обзор сегодняшних процедур
2. **Календарь** - планирование и просмотр процедур по дням
3. **Создание процедуры** - конструктор чек-листов
4. **Выполнение процедуры** - пошаговое выполнение
5. **Библиотека** - все созданные процедуры
6. **Настройки** - управление уведомлениями и интеграциями

### Дизайн-требования
- Адаптивный дизайн для всех устройств
- Темная и светлая темы
- Интуитивно понятный интерфейс
- Использование компонентов shadcn/ui

## Монетизация (Freemium модель)
- **Бесплатный план**: до 5 активных процедур
- **Премиум план**: неограниченные процедуры, премиум-шаблоны, расширенные интеграции

## Критерии готовности MVP
- [ ] Пользователь может создавать и редактировать чек-листы
- [ ] Процедуры отображаются в календаре
- [ ] Работают вечерние напоминания
- [ ] Можно прикреплять медиа к шагам
- [ ] Базовая интеграция с Яндекс.Станцией работает
- [ ] Приложение развернуто на Vercel

## Будущие возможности (после MVP)
1. Условные переходы в процедурах
2. Параллельные действия
3. Вложенные процедуры
4. Социальные функции и публичные шаблоны
5. Мобильное приложение
6. Расширенные интеграции умного дома
7. Аналитика и статистика выполнения

## Технические требования
- Поддержка темной/светлой темы
- Адаптивный дизайн для мобильных устройств
- Оптимизация производительности
- Обработка ошибок и валидация данных
- Локализация (русский язык)

## Риски и ограничения
- Зависимость от API Яндекс.Станции
- Ограничения бесплатного плана Supabase
- Сложность синхронизации данных в реальном времени
- Необходимость обработки различных форматов медиа

## Дата начала: 2025-10-24
## Предполагаемая дата завершения MVP: 2025-12-15